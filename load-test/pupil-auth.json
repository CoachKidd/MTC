{
   "config": {
      "target": "http://localhost:3001/",
      "phases": [
         {
            "duration": 60,
            "arrivalRate": 5
         },
         {
            "duration": 120,
            "arrivalRate": 5,
            "rampTo": 50
         },
         {
            "duration": 600,
            "arrivalRate": 50
         }
      ],
      "payload": {
         "path": "./data/pupilLogins.csv",
         "fields": [
            "schoolPin",
            "pupilPin"
         ]
      }
   },
   "scenarios": [
      {
         "name": "pupil login",
         "flow": [
            {
               "post": {
                  "url": "/api/questions",
                  "json": {
                    "schoolPin": "{{ schoolPin }}",
                    "pupilPin": "{{ pupilPin }}"
                  },
                  "capture": {
                     "json": "$.access_token",
                     "as": "jwt"
                  }
               }
            },
            {
               "think": 3
            },
            {
               "post": {
                  "url": "/api/completed-check",
                  "json": {
                     "access_token": "{{ jwt }}"
                  }
               }
            }
         ]
      }
   ]
}